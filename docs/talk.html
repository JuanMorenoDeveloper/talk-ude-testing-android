<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Fundamentos de testing en Aplicaciones Android</title><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport" /><link href="reveal.js-3.6.0/css/reveal.css" rel="stylesheet" /><link rel="stylesheet" href="theme/ude.css" id="theme" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" /><style>/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}</style><link href="reveal.js-3.6.0/lib/css/zenburn.css" rel="stylesheet" /><script>document.write( '<link rel="stylesheet" href="reveal.js-3.6.0/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Fundamentos de testing en Aplicaciones Android</h1><div class="preamble"><script type="text/javascript">
    window.addEventListener("load", function() {

        revealDiv = document.querySelector("body div.reveal")
        footer = document.getElementById("schauderhaft-footer");
        revealDiv.appendChild(footer);

    } );
</script>
<div id="schauderhaft-footer" class="footer">
    <span class="element">UDE</span>
    <span class="element"></span>
    <span class="element">TI/ATI</span>
</div>
<aside class="notes"><div class="paragraph"><p>Documentación oficial en:
<a href="https://developer.android.com/training/testing/" class="bare">https://developer.android.com/training/testing/</a></p></div></aside></div></section>
<section data-background-image="images/testing-button.jpg" data-background-size="auto">
<aside class="notes"><div class="paragraph"><p>¿Qué es el testing de software?</p></div>
<div class="paragraph"><p>Es una investigación que provee información acerca de la calidad del software que se esta probando.
Provee también información objetiva acerca de los los riesgos de implementar una funcionalidad.
Permite detectar fallas o "bugs" en el software y verificar que el sistema está en condiciones de ser usado.
Ver: <a href="https://en.wikipedia.org/wiki/Software_testing" class="bare">https://en.wikipedia.org/wiki/Software_testing</a></p></div></aside></section>
<section id="_contenido"><h2>Contenido</h2><div class="ulist"><ul><li><p>Fundamentos del Testing</p></li><li><p>Pirámide de testing</p></li><li><p>Tipos de test</p></li><li><p>Librerías</p></li><li><p>Ejemplo</p></li><li><p>Conclusiones</p></li></ul></div></section>
<section id="_fundamentos_de_testing"><h2>Fundamentos de Testing</h2></section>
<section id="__por_qu_hacer_testing"><h2>¿Por qué hacer testing?</h2><div class="ulist"><ul><li><p><strong>Retroalimentación rápida</strong> de fallas</p></li><li><p><strong>Temprana detección de fallas</strong> en el ciclo de desarrollo</p></li><li><p><strong>Refactoring seguro</strong> permitiendo optimizaciones sin preocupación de las regresiones</p></li><li><p><strong>Velocidad estable en el desarrollo</strong>, ayudando a minimizar la deuda técnica</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Probar aplicaciones es una parte integral del proceso de desarrollo de aplicaciones.
Cuando se ejecutan test a una aplicación de manera consistente, podemos verificar la exactitud, el comportamiento funcional antes de liberarla publicamente.
Ver original en: <a href="https://developer.android.com/training/testing/" class="bare">https://developer.android.com/training/testing/</a></p></div></aside></section>
<section id="_testing_workflow" data-background-image="images/testing-workflow.png" data-background-size="auto"><h2>Testing Workflow</h2></section>
<section id="_tdd" data-background-image="images/TDD_Global_Lifecycle.png" data-background-size="auto"><h2>TDD</h2></section>
<section><div class="paragraph"><p>Es una práctica de ingeniería de software que involucra otras dos prácticas:</p></div>
<div class="ulist"><ul><li><p>Escribir las pruebas <strong>primero</strong> (Test First Development)</p></li><li><p>Refactorización (Refactoring).</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Ver original en: <a href="https://en.wikipedia.org/wiki/Test-driven_development" class="bare">https://en.wikipedia.org/wiki/Test-driven_development</a> y <a href="https://es.wikipedia.org/wiki/Desarrollo_guiado_por_pruebas" class="bare">https://es.wikipedia.org/wiki/Desarrollo_guiado_por_pruebas</a></p></div></aside></section>
<section id="_test_driven_development_cycle"><h2>Test-driven development cycle</h2><div class="olist arabic"><ol class="arabic"><li><p>Agregar un test (Entiendo el propósito de la funcionalidad)</p></li><li><p>Ejecutar todos los test y ver si el nuevo test falla (Debería fallar por las razones conocidas)</p></li><li><p>Escribir el mínimo código para que pase el test</p></li><li><p>Ejecutar nuevamente el test (Valida el punto anterior)</p></li><li><p>Refactorizar el código (Se optimiza) &#8230;&#8203;<strong>Repetir el proceso</strong></p></li></ol></div></section>
<section id="_beneficios"><h2>Beneficios</h2></section>
<section id="_confianza" data-background-image="images/confident.png" data-background-size="auto"><h2>Confianza</h2>
<aside class="notes"><div class="paragraph"><p>Dentro de los objetivos de usar TDD es incrementar la confianza en agregar cambios al sistema, lo que aumenta la productividad.</p></div>
<div class="paragraph"><p>además del diseño limpio.
Normalmente una clase o funcionalidad que se puede probar tiene que tener un buen diseño.</p></div></aside></section>
<section id="_diseo_limpio" data-background-image="images/clean-website.jpg" data-background-size="auto"><h2>Diseño limpio</h2>
<aside class="notes"><div class="paragraph"><p>TDD favorece el diseño limpio. Normalmente una clase o funcionalidad que se puede probar tiene que tener un buen diseño.</p></div></aside></section>
<section id="_pirmide_de_testing" data-background-image="images/pyramid.png" data-background-size="auto"><h2>Pirámide de testing</h2></section>
<section id="_tipos_de_test"><h2>Tipos de test</h2><div class="ulist"><ul><li><p><strong>Small test</strong> (Test unitarios). Independientes de las dependencias de producción. Usan mocks</p></li><li><p><strong>Medium test</strong>. Test de integración, se ejecutan en emuladores/dispositivos físicos</p></li><li><p><strong>Large test</strong>. Son test de integración que ejecutan flujos completos de la interfaz de usuario. Se ejecutan en emuladores/dispositivos</p></li></ul></div></section>
<section id="__qu_porcentaje_debo_cubrir"><h2>¿Qué porcentaje debo cubrir?</h2><div class="ulist"><ul><li><p>70% Small test</p></li><li><p>20% Medium test</p></li><li><p>10% Large test</p></li></ul></div></section>
<section id="_libreras"><h2>Librerías</h2><div class="ulist"><ul><li><p>JUnit</p></li><li><p>Roboelectric</p></li><li><p>Espresso</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Documentación en:</p></div>
<div class="ulist"><ul><li><p>JUnit: <a href="https://junit.org/junit4/" class="bare">https://junit.org/junit4/</a></p></li><li><p>Espresso: <a href="https://developer.android.com/training/testing/espresso/" class="bare">https://developer.android.com/training/testing/espresso/</a></p></li><li><p>Roboelectric: <a href="http://robolectric.org/" class="bare">http://robolectric.org/</a></p></li></ul></div></aside></section>
<section id="_conclusiones"><h2>Conclusiones</h2><div class="ulist"><ul><li><p>El uso de test agrega calidad a los sistemas</p></li><li><p>Permiten hacer refactor con confianza</p></li><li><p>Deben ser independientes a nivel de datos</p></li></ul></div>
<aside class="notes"><div class="paragraph"><p>Consideraciones importantes:</p></div>
<div class="ulist"><ul><li><p>Los test deben ser independientes a nivel de datos, cada uno debe tener su propio dato a probar. Para casos donde existen datos complejos considerar usar fuentes de datos tipo "factory".</p></li><li><p>Los test son independientes en ejecución, no se debe asumir que por default se ejecutan en cierto orden.</p></li><li><p>Se recomienda usar Fakes para emular funcionalidades complejas, evitando así el sobre uso de mocks. Esto lleva a que se debe usar interfaces para definir las dependencias y los @Service potencialmente implementen una o muchas interfaces pequeñas (3 métodos), evitar tener interfaces grandes.</p></li><li><p>Se deben probar tanto casos positivos como negativos de los métodos (validaciones).
Por ejemplo si se espera que el método arroje una excepción se puede usar la anotación @Test(expected = ExcepcionQueDevuelveElMetodo.class)</p></li><li><p><strong>Iniciar con test unitarios y luego test de integración</strong>.</p></li><li><p>La documentación para uso de JUnit y Mockito se encuentra en:</p></li><li><p><a href="http://junit.org/junit4/" class="bare">http://junit.org/junit4/</a></p></li><li><p><a href="http://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html" class="bare">http://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html</a></p></li></ul></div>
<div class="paragraph"><p>Conceptos básicos:</p></div>
<div class="ulist"><ul><li><p>Dummy: Son objetos que se envían, pero nunca se utilizan en el test. Por ejemplo, imaginemos que tenemos un objeto de la clase GestorDeTareas, que gestiona objetos Tarea, que necesita una lista de parámetros Tarea para funcionar. Si en el test solo queremos comprobar que uno de sus métodos me devuelva el número de Tareas que contiene ese gestor de tareas, podemos utilizar dummies para rellenar el gestor de tareas. Muchas veces los dummies se rellenan con valores NULL.</p></li><li><p>Stub: Es un objeto en el que configuras que cuando llames a un método devuelva un valor determinado. Por ejemplo, si tienes un objeto con un método que suma dos números, un stub sería un objeto que independientemente de los valores que le pases al método suma, devuelva 5.</p></li><li><p>Spy: Estos objetos guardan las acciones que se hacen sobre ellos. Hace una especie de seguimiento sobre qué métodos se han llamado y con qué parámetros. Cuando para que un test sea un éxito no es suficiente ver el estado de los objetos disponibles, podemos usar un spy y comprobar cosas como cuántas veces se ha llamado a un método, qué valores han devuelto, etc.</p></li><li><p>Mock: Muy similar a un spy, pero no solo guardan las acciones que se hacen sobre ellos, también es necesario configurar qué comportamiento esperas cuando alguien llame a alguno de sus métodos.</p></li><li><p>Fake: Es un objeto que implementado completamente y que funciona, como un objeto normal sin ser simulado, pero se diferencia en que está falseando algo para hacer alguna cosa más fácil de probar. Un ejemplo de esto podría ser un objeto que utiliza una base de datos en memoria en lugar de acceder a consultar la base de datos de producción.</p></li></ul></div></aside></section>
<section id="_juan_moreno"><h2>Juan Moreno</h2><div class="paragraph"><p>-</p></div>
<img src="images/ude-logo.png"  style="vertical-align: middle; border:none;" width="200"/>
</span>
<div class="paragraph"><p><a href="http://bit.ly/ude-testing-android">Presentación online: http://bit.ly/ude-testing-android</a></p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa fa-lightbulb-o" title="Tip"></i></td><td class="content"><div class="paragraph"><p>Para imprimir agregar al link: ?showNotes=separate-page&amp;print-pdf</p></div></td></tr></table></div></section></div></div><script src="reveal.js-3.6.0/lib/js/head.min.js"></script><script src="reveal.js-3.6.0/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'black',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'linear',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1280,
  height: 720,

  // Factor of the display size that should remain empty around the content
  margin: 0,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js-3.6.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js-3.6.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js-3.6.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      
      { src: 'reveal.js-3.6.0/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js-3.6.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>